---
layout: post
title: 用指针访问二维数组
category: academic
tags: [academic]
# excerpt: Thanks!
---

<p>在日常做题的过程中，发现了一个关于通过指针访问二维数组的问题</p><p><strong>题目如下：</strong></p><p>**若有以下语句：  <br>**<code>int a[4][5],(*p)[5];</code><br><code>p=a;  </code><br>`<strong>下面哪个选项表示a数组中的元素？</strong>  <br>`A.  p+1<br>B.  * (p+3)<br>C.  * (p+1)+3<br>D.  <em> ( </em> p+2)`</p><p>正确答案为D，我选择了B项。</p><p><strong>以下是我的想法 （注意！！这只是我自己错误的思路！！！）</strong></p><p>由题干可得：</p><p>开了一个4行5列名为a的二维数组，同时声明了一个大小为5的数组指针。</p><p>此时p中存着数组a的首地址，即指针p指向a[0][0]，即(*p)== a[0][0] 。</p><p>因此B项中，*(p + 3) 等价于 a[0][3] <strong>（此处我的思路开始出错，原因是没有理解指针表示二维数组时的原理）</strong></p><p>所以我认为B项为正确答案;</p><p><strong>正确思路：</strong></p><p>由题干可得：</p><p>开了一个4行5列名为a的二维数组，同时声明了一个大小为5的数组指针。</p><p>此时p中存着数组a的首地址，即指针p指向a[0][0]，即(*p)== a[0][0] 。</p><p><strong>此时，首先来了解一下指针表示二维数组时的原理：</strong></p><p>假如有一个二维数组：  <br><code>int a[3][4] = {{1, 3, 5, 7}, {9, 11, 13, 15}, {17, 19, 21, 23}}; </code>  <br>        其中，a 是二维数组名。a 数组包含 3 行，即 3 个行元素：a[0]，a[1]，a[2]。每个行元素都可以看成含有 4 个元素的一维数组。而且 C 语言规定，a[0]、a[1]、a[2]分别是这三个一维数组的数组名。</p><p>        a[0]、a[1]、a[2] 既然是一维数组名，一维数组的数组名表示的就是数组第一个元素的地址，所以 a[0] 表示的就是元素 a[0][0] 的地址，即 a[0]==&a[0][0]；a[1] 表示的就是元素 a[1][0] 的地址，即 a[1]==&a[1][0]；a[2] 表示的就是元素 a[2][0] 的地址，即 a[2]==&a[2][0]。</p><p>        所以二维数组a[M][N]中，a[i]表示的就是元素a[i][0]的地址，即<code>a[i] == &amp;a[i][0] ;</code>我们知道，在一维数组 b 中，数组名 b 代表数组的首地址，即数组第一个元素的地址，b+1 代表数组第二个元素的地址，…，b+n 代表数组第 n+1 个元素的地址。所以既然 a[0]、a[1]、a[2]、…、a[M–1] 分别表示二维数组 a[M][N] 第 0 行、第 1 行、第 2 行、…、第 M–1 行各一维数组的首地址，那么同样的道理，a[0]+1 就表示元素 a[0][1] 的地址，a[0]+2 就表示元素 a[0][2] 的地址，a[1]+1 就表示元素 a[1][1] 的地址，a[1]+2 就表示元素 a[1][2] 的地址……a[i]+j 就表示 a[i][j] 的地址，即<code>a[i]+j == &amp;a[i][j]</code>即<code>&amp;a[i][0]+j == &amp;a[i][j]</code></p><p>        又因为在一维数组中 a[i] 和 *(a+i)  等价，即<code>a[i] == *(a+i)</code>这个关系在二维数组中同样适用，二维数组 a[M][N] 就是有 M 个元素 a[0]、a[1]、…、a[M–1] 的一维数组。所以可得<code>*(a+i)+j == &amp;a[i][j]</code></p><p>至此，我们可以理解为什么B项是错误的。</p><p><strong>那么为什么要选D呢？</strong></p><p>        二维数组可以想象成一个一维数组，二维数组 a[3][4] 就是有三个元素的一维数组，同时，这三个元素又各是一个一维数组 <strong>（为了方便理解，此处一位数组命名为t）</strong>t[0]、t[1]、t[2] <strong>（通俗来讲就是两个一维数组的嵌套）</strong>。所以数组 a 的第一个元素不是 a[0][0]，而是 t[0]，所以数组名 a 表示的不是元素 a[0][0] 的地址，而是 t[0] 的地址，而t[0]表示的是一维数组t的第一个元素。</p><p>所以由此可得：</p><pre><code>a == &amp;a[0]；
又
a[0] == &amp;a[0][0]；
</code></pre><p><strong>综合上面两个结论，得出：</strong></p><pre><code>*(p + 2)  ==  &amp;a[2][0]；
*(*(p + 2)) == a[2][0];
</code></pre><p> 所以选D项。</p><p>结束。</p>
